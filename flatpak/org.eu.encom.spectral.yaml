id: org.eu.encom.spectral
runtime: org.kde.Platform
runtime-version: "5.12"
sdk: org.kde.Sdk
command: spectral
finish-args:
- --share=ipc
- --share=network
- --socket=x11
- --socket=wayland
- --device=dri
- --filesystem=xdg-download
- --talk-name=org.freedesktop.Notifications
modules:
- name: olm
  buildsystem: cmake-ninja
  sources:
  - type: git
    url: https://gitlab.matrix.org/matrix-org/olm.git
    tag: 3.1.3
    commit: ebd3ba6cc17862aefc9cb3299d60aeae953cc143
    disable-shallow-clone: true
  config-opts:
  - -DCMAKE_BUILD_TYPE=Release
- name: spectral
  buildsystem: simple
  sources:
  - type: dir
    path: ../
  build-commands:
  - qmake QMAKE_CFLAGS="$CFLAGS" QMAKE_CXXFLAGS="$CXXFLAGS" QMAKE_LFLAGS="$LDFLAGS" PREFIX=/app .
  - make -j4
  - make install

