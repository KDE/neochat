stages:
  - build

build-native:
  image: rabits/qt:5.11-desktop
  stage: build
  before_script:
    - git submodule update --init --recursive
  script:
    - mkdir build && cd build
    - qmake ../matrique.pro -spec linux-g++ CONFIG+=qtquickcompiler
    - make -j4
    
  artifacts:
    paths:
    - build/

build-flatpak:
  image: fedora:latest
  stage: build
  before-script: dnf install flatpak 
  script:
    - flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub
    - flatpak install flathub org.kde.Platform//5.11
    - gpg2 -v --import <(echo $GPG_SECRET_KEY)

